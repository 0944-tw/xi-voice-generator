<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>主席語音生成器</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic&amp;display=swap">
</head>

<body>
    <header class="text-center text-white masthead" style="background:url('assets/img/bg-masthead.jpg')no-repeat center center;background-size:cover;">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <script>

                    function onClick() {
                     console.log("Requesting")
                     let xhr = new XMLHttpRequest();
                     xhr.open("GET","./generate?name=" + document.getElementById("query").value);
                     xhr.onload = () => {
                            let parsed = JSON.parse(xhr.responseText)
                            let audio = document.querySelector("audio");
                            audio.src = parsed.filePath;
                            audio.play();
                     }
                     xhr.send();
                    }
                </script>
                <div class="col-xl-9 mx-auto position-relative">
                    <h1 class="mb-5">主席語音生成器 2.0</h1><audio controls=""></audio>
                </div>
                <div class="col-md-10 col-lg-8 col-xl-7 mx-auto position-relative">
                    <form>
                        <div class="row">
                            <div class="col-12 col-md-9 mb-2 mb-md-0"><input class="form-control form-control-lg" type="text" id="query" placeholder="安排"></div>
                            <div class="col-12 col-md-3"><button class="btn btn-primary btn-lg" onclick="onClick">生成</button></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </header>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>